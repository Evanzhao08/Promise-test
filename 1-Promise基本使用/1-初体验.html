<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div class="container">
        <h2 class="page-header">Promise 初体验</h2>
        <button class="btn btn-primary" id="btn">点击抽奖</button>
    </div>
<script>
    function rand(m,n) {
        return Math.ceil(Math.random()*(n-m+1)+m-1)
    }
    const btn = document.querySelector('#btn');
    btn.addEventListener('click',()=>{
        //30% 1-100
    // setTimeout(()=>{
    //     let n = rand(1,100)
    //     if (n<=30){
    //        alert('恭喜中奖了')
    //     }else{
    //         alert('再接再厉')
    //     }
    // },1000)

        //Promise 形式实现
        //resolve 解决 函数类型的数据
        //reject 拒绝 函数类型的数据
        const p = new Promise((resolve, reject)=>{
            setTimeout(()=>{
                let n = rand(1,100)
                if (n<=30){
                    resolve(n);//将promise对象的状态设置为【成功】
                }else{
                    reject(n);//将promise对象的状态设置为【 失败】
                }
            },1000)
        })
        //调用then方法 value 值 reason理由
        p.then((value)=>{
            alert('恭喜中奖了'+value)
        },(reason)=>{
            alert('再接再厉'+reason)
        })
    })
</script>

</body>
</html>